app_root: frontend
buildpacks:
  nodejs:
    version: "18.x"  # Versione stabile di Node.js
    npm_version: "9.x"  # Versione stabile di npm
  nodejs_install:
    script: "cd frontend && npm install"  # Usa npm install standard invece di npm ci
  nodejs_build:
    script: "cd frontend && npm run build"  # Script di build semplificato
env:
  - variable: FIREBASE_CONFIG
    value: '{"databaseURL":"","projectId":"ai-content-creator-f7d53","storageBucket":"ai-content-creator-f7d53.firebasestorage.app"}'
    availability:
      - BUILD
      - RUNTIME
  - variable: FIREBASE_WEBAPP_CONFIG
    value: '{"apiKey":"AIzaSyCT0BFTRljnsrbcT1SxwsWEEyrgca952cg","appId":"1:1050991356651:web:47b42676c06e732b6eecae","authDomain":"ai-content-creator-f7d53.firebaseapp.com","databaseURL":"","messagingSenderId":"1050991356651","projectId":"ai-content-creator-f7d53","storageBucket":"ai-content-creator-f7d53.firebasestorage.app"}'
    availability:
      - BUILD
  - variable: CI
    value: 'false'
    availability:
      - BUILD
  - variable: SKIP_PREFLIGHT_CHECK
    value: 'true'
    availability:
      - BUILD
  - variable: PUBLIC_URL
    value: '.'
    availability:
      - BUILD